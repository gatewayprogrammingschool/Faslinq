name: Benchmark

on:
#   push:
#     branches: [ main ]
  workflow_dispatch:

jobs:
  build:

    runs-on: windows-latest

    steps:
    - uses: actions/checkout@v2
    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 6.0.x
        include-prerelease: true
    - name: Benchmark
      run: .\bench.ps1 -Select -Where -Once -Join

    - name: Git Commit and Push
      # You may pin to the exact commit or the version.
      # uses: github-actions-x/commit@5cf7985b07155682f82d02b6c2188d90cebeb0c8
      uses: github-actions-x/commit@v2.8
      with:
        # Github Token with commit access
        github-token: ${{ secrets.GITHUB_TOKEN }}
        # Override branch to push to
        commit-message: "Updated Benchmarks."
        files: ./results.md
